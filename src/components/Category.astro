---
import { getAllPostsByCategory } from "src/utils/content_utils";
const postsByCategory = await getAllPostsByCategory();
---

<div class="bg-[#444] rounded-lg p-4">
    <h1 class="mb-3">Category</h1>
    {Object.entries(postsByCategory).map(([categoryName, posts]) => (
        <div class="group relative">
            <button class="inline-flex items-center justify-between w-full text-white hover:bg-[#555] font-medium rounded-lg text-sm px-2 py-2">
                {categoryName}
                <svg class="w-4 h-4 ms-1.5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m19 9-7 7-7-7"/>
                </svg>
            </button>

            <div class="absolute left-full top-0 z-10 hidden group-hover:block bg-[#333] border border-[#444] rounded-lg shadow-lg w-44">
                <ul class="p-2 text-sm text-white">
                    {posts.map((post) => (
                        <li>
                            <a href={`/posts/${post.id}`} class="block p-2 hover:bg-[#444] rounded">
                                {post.title}
                            </a>
                        </li>
                    ))}
                </ul>
            </div>
        </div>
    ))}
</div>
